@import "tailwindcss";

@plugin "tailwindcss-animate";

@custom-variant dark (&:is(.dark *));

/* Import touch optimizations */
@import './styles/touch-optimizations.css';

/* Import TPV-specific optimizations */
@import './styles/tpv-optimizations.css';

/* Base styles for theme transitions - themes are loaded dynamically by ThemeCore */

/* Tailwind v4 Theme Configuration */
@theme inline {
  /* Border radius */
  --radius: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Colors */
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);

  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);

  --color-info: var(--info);
  --color-info-foreground: var(--info-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Fonts */
  --font-sans: var(--font-sans);
  --font-serif: var(--font-serif);
  --font-mono: var(--font-mono);

  /* Touch spacing */
  --spacing-touch-target: var(--touch-target-size);
  --spacing-touch-target-lg: var(--touch-target-large);
  --spacing-touch-target-xl: var(--touch-target-xl);
  --spacing-touch: var(--touch-spacing);
  --spacing-touch-md: var(--touch-spacing-md);
  --spacing-touch-lg: var(--touch-spacing-lg);

  /* Shadows */
  --shadow-2xs: var(--shadow-2xs);
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow: var(--shadow);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-2xl: var(--shadow-2xl);

  /* Spacing */
  --spacing: var(--spacing);

  /* Letter spacing / tracking */
  --tracking-tighter: calc(var(--tracking-normal) - 0.05em);
  --tracking-tight: calc(var(--tracking-normal) - 0.025em);
  --tracking-normal: var(--tracking-normal);
  --tracking-wide: calc(var(--tracking-normal) + 0.025em);
  --tracking-wider: calc(var(--tracking-normal) + 0.05em);
  --tracking-widest: calc(var(--tracking-normal) + 0.1em);

  /* Animations */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-touch-feedback: scale var(--touch-feedback-duration) ease-in-out;
  --animate-ripple: ripple var(--touch-ripple-duration) linear;
  --animate-spin: spin 1s linear infinite;
}

@keyframes accordion-down {
  from { height: 0; }
  to { height: var(--radix-accordion-content-height); }
}

@keyframes accordion-up {
  from { height: var(--radix-accordion-content-height); }
  to { height: 0; }
}

@keyframes ripple {
  0% { width: 0; height: 0; opacity: 0.15; }
  100% { width: 300px; height: 300px; opacity: 0; }
}

/* Utilidades para truncar texto */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

@font-face {
  font-family: "Cascadia Code Nerd Font";
  font-style: normal;
  font-weight: 200;
  src: url('assets/fonts/CaskaydiaCoveNerdFont-Regular.ttf') format('truetype');
  font-variant-ligatures: none;
}

/* Eliminar efecto bounce/rebote en scroll solo en el root */
html, body {
  overscroll-behavior-y: contain;
  overscroll-behavior-x: none;
  -webkit-overflow-scrolling: touch;
}

/* Permitir scroll en ScrollArea espec√≠ficamente */
[data-radix-scroll-area-viewport] {
  overscroll-behavior: auto !important;
  -webkit-overflow-scrolling: touch;
}

@layer base {
  :root {
    /* MoonSun Switch specific variables */
    --dark: #111111;
    --sun: #ffd700;
    --sun-shadow: #987416;
    --moon: #dddddd;
    --moon-shadow: #808080;
    --star: #ffffff;
    --cloud: #ffffff;
    --crater: #535370;
    --shadow-01: #80808077;
    --shadow-02: #ffffff22;
    --shadow-03: #555555;
    --white: #ffffff;
    --background-day: linear-gradient(skyblue, cadetblue);
    --background-night: linear-gradient(-45deg, #222, #000030);
    
    /* Typography and spacing that remain constant */
    --font-sans: Geist, sans-serif;
    --font-serif: "Lora", Georgia, serif;
    --font-mono: "Fira Code", "Courier New", monospace;
    --tracking-normal: 0em;
    --tracking-tighter: calc(var(--tracking-normal) - 0.05em);
    --tracking-tight: calc(var(--tracking-normal) - 0.025em);
    --tracking-wide: calc(var(--tracking-normal) + 0.025em);
    --tracking-wider: calc(var(--tracking-normal) + 0.05em);
    --tracking-widest: calc(var(--tracking-normal) + 0.1em);
    --spacing: 0.25rem;
  }

  body {
    letter-spacing: var(--tracking-normal);
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
    transition: background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                border-color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                fill 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                stroke 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Faster transitions when theme is actively changing */
  .theme-transitioning * {
    transition: background-color 0.15s cubic-bezier(0.4, 0, 0.2, 1), 
                color 0.15s cubic-bezier(0.4, 0, 0.2, 1), 
                border-color 0.15s cubic-bezier(0.4, 0, 0.2, 1),
                fill 0.15s cubic-bezier(0.4, 0, 0.2, 1),
                stroke 0.15s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }
  
  body {
    @apply bg-background text-foreground;
  }
}

body {
  font-family: "Cascadia Code Nerd Font", sans-serif;
  user-select: none;
  -webkit-user-select: none; /* Para navegadores basados en WebKit */
  -moz-user-select: none; /* Para Firefox */
  -ms-user-select: none; /* Para Internet Explorer/Edge */
}

/* Table layout optimizations for OrderTable */
.table-fixed {
  table-layout: fixed;
}

.table-fixed th,
.table-fixed td {
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Scrollbar utilities for horizontal scroll containers */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;     /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;            /* Chrome, Safari, Opera */
}

/* Touch optimizations */
.touch-optimized {
  touch-action: manipulation;
  cursor: none;
}

/* ==================== Performance-based optimizations ==================== */

/* Default animation/transition durations (can be overridden by JS) */
:root {
  --animation-duration: 0.3s;
  --transition-duration: 0.15s;
}

/* Reduced motion - respects prefers-reduced-motion */
.reduced-motion *,
.reduced-motion *::before,
.reduced-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* Low performance mode - simplified animations */
.low-performance * {
  transition-duration: var(--transition-duration) !important;
  animation-duration: var(--animation-duration) !important;
}

.low-performance .animate-spin {
  animation: none !important;
}

/* Very low performance mode - disable most visual effects */
.very-low-performance * {
  transition: none !important;
  animation: none !important;
  box-shadow: none !important;
  text-shadow: none !important;
  filter: none !important;
  backdrop-filter: none !important;
}

.very-low-performance .blur-sm,
.very-low-performance .blur-md,
.very-low-performance .blur-lg,
.very-low-performance .blur-xl {
  backdrop-filter: none !important;
  filter: none !important;
}

/* Animations disabled mode */
.animations-disabled * {
  animation: none !important;
}

.animations-disabled [class*="animate-"] {
  animation: none !important;
}

/* Disable hover effects on low-performance touch devices */
@media (hover: none) {
  .low-performance *:hover {
    transform: none !important;
    box-shadow: inherit !important;
  }
}

/* ==================== Screenshot capture utilities ==================== */

/* Hide elements marked with .screenshot-hide during screenshot capture */
body.screenshot-capturing .screenshot-hide {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}
